---
title: Самая простая стратегия для трейдинга — увеличиваем доходность
tags: проверкаидеи
---

[В прошлый раз я рассмотрел очень простую стратегию: покупай после закрытия вниз и продавай после закрытия вверх.](https://zenoftrading.github.io/very-simle-trading-strategy-1.html) Там максимальное количество закрытий подряд было три. То есть нужно дождаться трёх закрытий вниз подряд и только потом покупать. С продажами наоборот.

Сегодня покажу что будет, если ждать 4, 5, 6... а сколько вообще может быть закрытий подряд?

Немного переписал свой бектестер, чтобы он считал дни в цикле и теперь можно посчитать любое количество дней. Ну как любое, в разумных пределах. На рассчёт каждого добавленного дня уходит 10 секунд. То есть один год бектеста считается за секунду. Ладно, что-то я углубился в технические детали.

Для начала посмотрим на график акций сбербанка за последние 10 лет.

![Купи и держи](/assets/images/2020/11/buyhold.png)

График цены сбербанка за последние 10 лет.

Теперь посмотрим на продажи до 5 дней. То есть в пике нужно ждать 5 закрытий подряд, а потом покупать или продавать.

## Покупки

![Покупки](/assets/images/2020/11/equity_buy_1_5_days.png)

Графики покупок

Количество сделок в каждом варианте:
- Equity_Buy_1_Days    1291
- Equity_Buy_2_Days     626
- Equity_Buy_3_Days     294
- Equity_Buy_4_Days     142
- Equity_Buy_5_Days      69

Видно, что ждать 4 закрытия подряд, а потом покупать, будет выгоднее, чем 3 закрытия подряд. А вот 5 закртий подряд уже дают падение прибыли. Что в целом логично, так как 5 подряд одинаковых закрытий бывает не часто.

Посмотрим на графики продаж.

## Продажи

![Продажи](/assets/images/2020/11/equity_sell_1_5_days.png)

Графики продаж

Количество сделок:
- Equity_Sell_1_Days    1212
- Equity_Sell_2_Days     547
- Equity_Sell_3_Days     238
- Equity_Sell_4_Days      91
- Equity_Sell_5_Days      33

Тут ситуация, как и с покупками. Ждать 4 закрытия подряд самая выгодная стратегия.

А теперь совместим покупки и продажи.

## Покупки и продажи вместе

![Покупки и продажи вместе](/assets/images/2020/11/equity_buysell_1_5_days.png)

Покупки и продажи вместе

Количество сделок:
- Equity_Buysell_1_Days    2503
- Equity_Buysell_2_Days    1173
- Equity_Buysell_3_Days     532
- Equity_Buysell_4_Days     233
- Equity_Buysell_5_Days     102

При 4 закрытиях подряд прибыль выросла почти до 3. Неплохая прибавка.

## И что?

1. Я всё ещё не учитываю комиссии. Думается мне что с комиссиями, вариант где больше всего сделок, будет стремится к 0.
2. С увеличением количества закрытий подряд доходность растёт. Что логично. Количество одинаковых закрытий подряд далеко от случайности и это скорее ненормальная ситуация. Но доходность растёт до определенного значения. 5 закрытий подряд уже редкость и на них особо не заработаешь. Зато и не проиграешь.
3. Ждать 4 подряд закрытия вниз, а потому покупать и 4 подряд закрытия вверх, а потом продавать самая выигрышная стратегия. 
4. В такой стратегии имеем 233 сделки за 10 лет. Это по 23 сделки в год. Или по 2 сделки в месяц. Крайне не требовательная к ресурсам стратегия. Хотя тут как посмотреть. Для человека ждать это самое сложное. Но тут на помощь могут придти роботы.
5. Просадка на всех графиках есть только в 2014 году, в остальное время её практически нет. Если ждать 5 дней, то просадки вообще минимальны.
6. Стратегия максимально простая для повторения.
7. Удивительно, но ни одна стретегия не сливает все в 0.

Что ещё проверю и о чём напишу:
- Посмотрю как комиссия влияет на доходность.
- Проверю как эта идея ведёт себя на разных классах активов на разных рынках. В комментариях к предыдущей статье просили добавить пару российских акций.
- Посмотрим как ещё это всё можно улучшить. В комментариях к предыдущей статье написали пару вариантов для проверки.

P.S. Обновленный код бекстестера можно так же взять в телеграме [https://t.me/zenoftrading](https://t.me/zenoftrading)